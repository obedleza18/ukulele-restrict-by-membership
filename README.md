# ukulele-restrict-by-membership
Ukulele Cheats Restrict By Membership Plugin

This Plugin was Developed so the user can have some content on the website restricted to logged out users. The Plugin manages different levels of Membership, some of them paid monthly through PayPal. Each content category that is restricted has a Landing Page where the user can mention what the user will see when subscribing to the website. The Pugin also subscribes users to MailChimp and assigns them Segments.

This Plugin contains a Membership Controller Class which takes care of everything about the paid membership. It contains shortcodes to process the PDT and IPN messages of PayPal to subscribe or unsubscribe users. Here is more information about the Membership Controller Class:

    /**
     *  Class to control all access to content. This class is also in charge of redirecting the
     *  user to PayPal when needed. Also receives the messages sent by PayPal to validate the
     *  transactions. It also communicates to MailChimp to configure Lists, Subscribers and Segments.
     *
     *  List of Shortcodes and basic explanation:
     *    [ukulele-check-transaction]       -> Checks transaction and grants privileges after user pays.
     *    [ukulele-subscribe-button]        -> Prints the PayPal Subscribe button.
     *    [ukulele-unsubscribe-button]      -> Prints the PayPal Unsubscribe button.
     *    [ukulele-donate-button]           -> Prints the PayPal Donate button.
     *    [ukulele-logged inout="in|out"]   -> Checks if user is logged in or out.
     *    [ukulele-is-subscribed yesno="yes|no"]    -> Checks if the user is subscribed to PayPal.
     *    [ukulele-process-paypal-ipn-unsubscribe]  -> Process PayPal IPN messages.
     *
     *  Shortcodes to be used as variables after using [ukulele-check-transaction]
     *    [u-payment]       -> Returns the amount paid by the user.
     *    [u-currency]      -> Returns the currency of the payment.
     *    [u-level]         -> Returns the subscriptioin level the user paid.
     *    [u-last-visited]  -> Returns the URL of blocked content that the user last visited.
     *
     *  Things that need to be configured on WordPress, PayPal and MailChimp:
     *      1. The PDT return to website URL. The page should have the shortcode [ukulele-check-transaction]
     *      2. The PDT Token should be copied from PayPal and pasted on the Ukulele Membership Settings.
     *      3. The IPN URL so PayPal can send messages. The page should have the shortcode [ukulele-process-paypal-ipn-unsubscribe]
     *      4. The Subscribe Button. This HTML code can be automatically generated by PayPal when 
     *          selecting the options to build the button. The code needs to be copied from PayPal 
     *          and pasted on the Ukulele Membership Settings. The Membership Level options need to
     *          end in an integer number indicating the privilege. For example Level 1, Level 2, Level 3
     *          or Nivel 1, Nivel 2, Nivel 3 or asdf 1234 1, asdf 4321 2, uiop 7890 3, and so on.
     *      5. The Unsubscribe Button. This HTML code is generated by PayPal. It needs to be copied
     *          and pasted on Ukulele Membership Settings.
     *      6. The Donate Button. The HTML code is generated by PayPal. It needs to be copied and
     *          pasted just like the other butons.
     *      7. The MailChimp API should be copied from MailChimp and pasted on the Ukulele Settings.
     *      8. On WordPress, Tags should be added to Pages or Posts, Membership Access Level should
     *          be configured on the Ukulele Membership Settings and Landing Pages. For each one of
     *          this Pages, the administrator needs to create he Pages and assign the URL as Landing
     *          Page. Landing Pages should have Tags (or not) assigned with level 0.
     */

After installing the Plugin. You will see more information of how to set the restriction to content on Settings -> Ukulele Membership Settings.
